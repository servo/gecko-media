dist: trusty
language: rust
rust:
  - 1.19.0
  - nightly
os:
  - linux
  - osx
notifications:
  webhooks: http://build.servo.org:54856/travis
addons:
  apt:
    sources:
      - sourceline: 'deb http://apt.llvm.org/trusty/ llvm-toolchain-trusty-3.8 main'
        keyurl: 'http://apt.llvm.org/llvm-snapshot.gpg.key'
      - sourceline: 'ppa:jonathonf/python-2.7'
    packages:
      - python
before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install zlib; fi
  - virtualenv ../venv
  - source ../venv/bin/activate
  - python --version
  - pip install servo-tidy
script:
  - servo-tidy
  - cargo test --verbose
